----startUnknownRecipientMessageSend----
curl -i \
-X POST \
-H "x-chatwala:58041de0bc854d9eb514d2f22d50ad4c:ac168ea53c514cbab949a80bebe09a8a" \
-H "Content-Type: application/json" \
-d '{"message_id":"m19", "sender_id":"b11111111-11111-1111-1111-111111111111"}' \
"http://localhost:1337/messages/startUnknownRecipientMessageSend";

response:
HTTP/1.1 200 OK
X-Powered-By: Express
Content-Type: application/json; charset=utf-8
Content-Length: 958
Date: Tue, 04 Mar 2014 20:16:18 GMT
Connection: keep-alive

{
    "message_meta_data": {
        "message_id": "m19",
        "message_instance_id": "m19.b11111111-11111-1111-1111-111111111111.UNKNOWN_RECIPIENT_STARTER",
        "sender_id": "b11111111-11111-1111-1111-111111111111",
        "recipient_id": "RECIPIENT_UNKNOWN",
        "timestamp": 1393964333162,
        "thread_id": "m19.b11111111-11111-1111-1111-111111111111.RECIPIENT_UNKNOWN",
        "thread_index": 0,
        "group_id": "bd06a7c2-ef85-132f-4f66-60b430d19757",
        "start_recording": 0,
        "read_url": "http://chatwalasandbox.blob.core.windows.net/messages/m19",
        "thumbnail_url": "http://chatwalaprofilepictures.blob.core.windows.net/sandbox/b11111111-11111-1111-1111-111111111111",
        "share_url": "http://chatwala.com/sandbox/?m19"
    },
    "write_url": "https://chatwalasandbox.blob.core.windows.net:443/messages/m19?se=2014-03-04T20%3A28%3A53Z&sp=rw&sr=b&sv=2012-02-12&sig=WjcacsKWYNWBaRvGg0tO4mXz%2BFodnS3XcQOPBkxeccc%3D",
    "response_code": {
        "code": 1,
        "message": "The message has been successfully added to the users outbox."
    }
}

//renew write sasurl



----completeUnknownRecipientMessageSend----
curl -i \
-X POST \
-H "x-chatwala:58041de0bc854d9eb514d2f22d50ad4c:ac168ea53c514cbab949a80bebe09a8a" \
-H "Content-Type: application/json" \
-d '{"message_id":"m19"}' \
"http://localhost:1337/messages/completeUnknownRecipientMessageSend";

response:
HTTP/1.1 200 OK
X-Powered-By: Express
Content-Type: application/json; charset=utf-8
Content-Length: 740
Date: Tue, 04 Mar 2014 20:21:12 GMT
Connection: keep-alive
{
    "message_meta_data": {
        "message_id": "m19",
        "message_instance_id": "m19.b11111111-11111-1111-1111-111111111111.UNKNOWN_RECIPIENT_STARTER",
        "sender_id": "b11111111-11111-1111-1111-111111111111",
        "recipient_id": "RECIPIENT_UNKNOWN",
        "timestamp": 1393964333162,
        "thread_id": "m19.b11111111-11111-1111-1111-111111111111.RECIPIENT_UNKNOWN",
        "thread_index": 0,
        "group_id": "bd06a7c2-ef85-132f-4f66-60b430d19757",
        "start_recording": 0,
        "read_url": "http://chatwalasandbox.blob.core.windows.net/messages/m19",
        "thumbnail_url": "http://chatwalaprofilepictures.blob.core.windows.net/sandbox/b11111111-11111-1111-1111-111111111111",
        "share_url": "http://chatwala.com/sandbox/?m19"
    },
    "response_code": {
        "code": 1,
        "message": "The message has been successfully marked as uploaded."
    }
}


------postGetReadURLForMessage------
curl -i \
-X POST \
-H "x-chatwala:58041de0bc854d9eb514d2f22d50ad4c:ac168ea53c514cbab949a80bebe09a8a" \
-H "Content-Type: application/json" \
-d '{"message_id":"m19", "shard_key":"s1"}' \
"http://localhost:1337/messages/postGetReadURLForMessage";


response:





----convertUnknownRecipientMessageToKnownRecipient----
curl -i \
-X POST \
-H "x-chatwala:58041de0bc854d9eb514d2f22d50ad4c:ac168ea53c514cbab949a80bebe09a8a" \
-H "Content-Type: application/json" \
-d '{"message_id":"m19", "recipient_id":"a11111111-11111-1111-1111-111111111111"}' \
"http://localhost:1337/messages/addUnknownRecipientMessageToInbox";

response:
HTTP/1.1 200 OK
X-Powered-By: Express
Content-Type: application/json; charset=utf-8
Content-Length: 69
Date: Tue, 04 Mar 2014 20:22:56 GMT
Connection: keep-alive

{"response_code":{"code":1,"message":"The recipient has been added"}}




----startReplyMessageSend----
curl -i \
-X POST \
-H "x-chatwala:58041de0bc854d9eb514d2f22d50ad4c:ac168ea53c514cbab949a80bebe09a8a" \
-H "Content-Type: application/json" \
-d '{"message_id":"m20", "user_id":"b11111111-11111-1111-1111-111111111111", "replying_to_message_id":"m19", "start_recording": 0}' \
"http://localhost:1337/messages/startReplyMessageSend";

response:
HTTP/1.1 200 OK
X-Powered-By: Express
Content-Type: application/json; charset=utf-8
Content-Length: 742
Date: Tue, 04 Mar 2014 20:23:38 GMT
Connection: keep-alive


----CompleteReplyMessageSend----
curl -i \
-X POST \
-H "x-chatwala:58041de0bc854d9eb514d2f22d50ad4c:ac168ea53c514cbab949a80bebe09a8a" \
-H "Content-Type: application/json" \
-d '{"message_id":"m20"}' \
"http://localhost:1337/messages/completeReplyMessageSend";

response:


----GetUserInbox----
curl -i \
-X POST \
-H "x-chatwala:58041de0bc854d9eb514d2f22d50ad4c:ac168ea53c514cbab949a80bebe09a8a" \
-H "Content-Type: application/json" \
-d '{"user_id":"69678C86-5437-4695-AA83-642CD4813144"}' \
"http://localhost:1337/messages/userInbox";

HTTP/1.1 200 OK
X-Powered-By: Express
Content-Type: application/json; charset=utf-8
Content-Length: 94
Date: Tue, 25 Feb 2014 01:12:45 GMT
Connection: keep-alive

{
    "response_code": {
        "code": 1,
        "message": "Messages have been returned"
    },
    "messages": [
        {
            "message_id": "m20",
            "message_instance_id": "m20.a11111111-11111-1111-1111-111111111111",
            "sender_id": "b11111111-11111-1111-1111-111111111111",
            "recipient_id": "a11111111-11111-1111-1111-111111111111",
            "timestamp": 1393966370564,
            "thread_id": "m19.b11111111-11111-1111-1111-111111111111.a11111111-11111-1111-1111-111111111111",
            "thread_index": 1,
            "group_id": "f7c82323-8610-371c-f4dd-6849cd1d5bc6",
            "start_recording": 0,
            "replying_to_message_id": "m19",
            "viewed": false,
            "delivered": false,
            "replied": false,
            "read_url": "http://chatwalasandbox.blob.core.windows.net/messages/m20",
            "thumbnail_url": "http://chatwalaprofilepictures.blob.core.windows.net/sandbox/b11111111-11111-1111-1111-111111111111",
            "share_url": "http://chatwala.com/sandbox/?m20"
        },
        {
            "message_id": "m19",
            "message_instance_id": "m19.a11111111-11111-1111-1111-111111111111",
            "sender_id": "b11111111-11111-1111-1111-111111111111",
            "recipient_id": "a11111111-11111-1111-1111-111111111111",
            "timestamp": 1393966335056,
            "thread_id": "m19.b11111111-11111-1111-1111-111111111111.a11111111-11111-1111-1111-111111111111",
            "thread_index": 0,
            "group_id": "f7c82323-8610-371c-f4dd-6849cd1d5bc6",
            "start_recording": 0,
            "replying_to_message_id": null,
            "viewed": false,
            "delivered": false,
            "replied": false,
            "read_url": "http://chatwalasandbox.blob.core.windows.net/messages/m19",
            "thumbnail_url": "http://chatwalaprofilepictures.blob.core.windows.net/sandbox/b11111111-11111-1111-1111-111111111111",
            "share_url": "http://chatwala.com/sandbox/?m19"
        }
    ],
    "continue": false
}





----RenewWriteUrlForMessage----
curl -i \
-X POST \
-H "x-chatwala:58041de0bc854d9eb514d2f22d50ad4c:ac168ea53c514cbab949a80bebe09a8a" \
-H "Content-Type: application/json" \
-d '{"message_id":"m19"}' \
"http://localhost:1337/messages/renewWriteUrlForMessage";





---- Get Messages for Thread -----
curl -i \
-X POST \
-H "x-chatwala:58041de0bc854d9eb514d2f22d50ad4c:ac168ea53c514cbab949a80bebe09a8a" \
-H "Content-Type: application/json" \
-d '{"user_id":"b11111111-11111-1111-1111-111111111111", "thread_id":"m19.b11111111-11111-1111-1111-111111111111.a11111111-11111-1111-1111-111111111111"}' \
"http://localhost:1337/messages/messagesForThread";





----- Post Profile Picture -------
curl -i \
-X POST \
-H "x-chatwala:58041de0bc854d9eb514d2f22d50ad4c:ac168ea53c514cbab949a80bebe09a8a" \
-H "Content-Type: application/json" \
-d '{"user_id":"b11111111-11111-1111-1111-111111111111"}' \
"http://localhost:1337/user/postUserProfilePicture";

{"sasURL":"http://chatwalasandbox.blob.core.windows.net/profile-pictures/b11111111-11111-1111-1111-111111111111","response_code":{"code":1,"message":"The profile picture SAS Url has been provided"}}


----Register Push Token--------
curl -i \
-X POST \
-H "x-chatwala:58041de0bc854d9eb514d2f22d50ad4c:ac168ea53c514cbab949a80bebe09a8a" \
-H "Content-Type: application/json" \
-d '{"platform_type":"ios", "user_id":"b11111111-11111-1111-1111-111111111111","push_token": "12327658e2f2a92c588aeb09d6ffc7cf5d89948f1d05c01abe58017b752370c7"}' \
"http://localhost:1337/user/registerPushToken";